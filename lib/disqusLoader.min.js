// https://github.com/osvaldasvalutis/disqusLoader.js
/*
	disqusLoader.js v1.0
	A JavaScript plugin for lazy-loading Disqus comments widget.
	-
	By Osvaldas Valutis, www.osvaldas.info
	Available for use under the MIT License
*/

!function(d,a){"use strict";function t(i,o){var r,s;return function(){var t=this,e=arguments,n=+new Date;r&&n<r+i?(clearTimeout(s),s=setTimeout(function(){r=n,o.apply(t,e)},i)):(r=n,o.apply(t,e))}}function n(){if(!p||!a.body.contains(p)||"loaded"==p.disqusLoaderStatus)return!0;var t,e=d.pageYOffset,n=[(t=p.getBoundingClientRect()).top+a.body.scrollTop,(t.left,a.body.scrollLeft)][0];if(n-e>d.innerHeight*u||0<e-n-p.offsetHeight-d.innerHeight*u)return!0;var i,o,r,s=a.getElementById("disqus_thread");s&&s.removeAttribute("id"),p.setAttribute("id","disqus_thread"),(p.disqusLoaderStatus="loaded")==f?DISQUS.reset({reload:!0,config:l}):(d.disqus_config=l,"unloaded"==f&&(f="loading",i=c,o=function(){f="loaded"},(r=a.createElement("script")).src=i,r.async=!0,r.setAttribute("data-timestamp",+new Date),r.addEventListener("load",function(){"function"==typeof o&&o()}),(a.head||a.body).appendChild(r)))}var i=!1,u=!1,l=!1,c=!1,f="unloaded",p=!1;d.addEventListener("scroll",t(i,n)),d.addEventListener("resize",t(i,n)),d.disqusLoader=function(t,e){e=function(t,e){var n,i={};for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i}({laziness:1,throttle:250,scriptUrl:!1,disqusConfig:!1},e),u=e.laziness+1,i=e.throttle,l=e.disqusConfig,c=!1===c?e.scriptUrl:c,(p="string"==typeof t?a.querySelector(t):"number"==typeof t.length?t[0]:t)&&(p.disqusLoaderStatus="unloaded"),n()}}(window,document);