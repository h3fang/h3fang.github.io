// https://github.com/osvaldasvalutis/disqusLoader.js
/*
	disqusLoader.js v1.0
	A JavaScript plugin for lazy-loading Disqus comments widget.
	-
	By Osvaldas Valutis, www.osvaldas.info
	Available for use under the MIT License
*/

!function(s,e){"use strict";function a(){if(!p.length||"loaded"==p.data("disqusLoaderStatus"))return!0;var t=n.scrollTop();if(p.offset().top-t>n.height()*l||0<t-p.offset().top-p.outerHeight()-n.height()*l)return!0;s("#disqus_thread").removeAttr("id"),p.attr("id","disqus_thread").data("disqusLoaderStatus","loaded"),"loaded"==h?DISQUS.reset({reload:!0,config:c}):(e.disqus_config=c,"unloaded"==h&&(h="loading",s.ajax({url:f,async:!0,cache:!0,dataType:"script",success:function(){h="loaded"}})))}var d,o,i,r,n=s(e),u=!1,l=!1,c=!1,f=!1,h="unloaded",p=s();n.on("scroll resize",(d=u,o=a,function(){var t=this,e=arguments,s=+new Date;i&&s<i+d?(clearTimeout(r),r=setTimeout(function(){i=s,o.apply(t,e)},d)):(i=s,o.apply(t,e))})),s.disqusLoader=function(t,e){e=s.extend({},{laziness:1,throttle:250,scriptUrl:!1,disqusConfig:!1},e),l=e.laziness+1,u=e.throttle,c=e.disqusConfig,f=!1===f?e.scriptUrl:f,(p=("string"==typeof t?s(t):t).eq(0)).data("disqusLoaderStatus","unloaded"),a()}}(jQuery,window,document);
